# Claude Development Guidelines

이 프로젝트에서 Claude가 코드 작업을 할 때 따라야 할 가이드라인입니다.

## 필수 실행 명령어

모든 코드 작업 완료 후 반드시 다음 명령어들을 순서대로 실행해야 합니다:

1. **TypeScript 컴파일 체크**: `npx tsc --noEmit`
2. **테스트 실행**: `bun test`

이 명령어들이 모두 성공해야만 작업이 완료된 것으로 간주합니다.

## 코드 작업 전 필수 확인사항

작업을 시작하기 전에 반드시 기존 코드가 어떻게 작성되어 있는지 확인해야 합니다:

1. **비슷한 기능의 기존 코드 확인**: 같은 기능이나 패턴을 가진 다른 파일들을 먼저 읽어보세요
2. **기존 코드 스타일 파악**: 함수명, 변수명, 파일 구조 등의 컨벤션을 확인하세요
3. **의존성 및 import 패턴 확인**: 다른 파일들이 어떤 라이브러리를 사용하고 어떻게 import하는지 확인하세요

## API 개발 패턴

### 함수 시그니처 패턴

모든 API 함수는 다음 패턴을 따라야 합니다:

```typescript
export const functionName = async (
  { param1, param2 }: ApiSpec["functionName"]["req"],
  req: ApiRequest
): Promise<ApiSpec["functionName"]["res"]> => {
  // 구현
};
```

## 스키마 수정 규칙

**데이터베이스 스키마(schema.ts)를 수정하기 전에 반드시 사용자에게 승인을 받아야 합니다.**

1. **스키마 수정 전 필수 절차:**
   - 수정 이유와 목적을 명확히 설명
   - 영향을 받을 기존 코드와 API 파악
   - 수정 계획을 구체적으로 제시
   - 사용자 승인 후에만 수정 진행

2. **스키마 수정이 필요한 경우:**
   - 새로운 Document 타입 추가/제거
   - 기존 Document 필드 변경
   - Index 구조 변경
   - Ownership 관계 변경

3. **스키마 수정 후 필수 작업:**
   - 스키마 변경 후 반드시 `npm run schema-gen` 실행
   - 최신 db.ts 파일 생성 확인
   - 작업 시작 전에도 schema-gen을 실행하여 최신 상태 확인

## 중요 규칙

1. **절대 빌드나 테스트가 실패한 상태로 작업을 완료하지 마세요.**
