var c=async(o,s)=>{try{let t=s.cookies.get("sessionId")||"temporary-session-id";return{ok:!0,tosAgreed:!1}}catch{return{ok:!1,reason:"NOT_LOGGED_IN"}}};var r={getMe:c};var A=async(o,s)=>{try{if(o.httpMethod&&o.path){let t=o.path.slice(1);if(o.httpMethod==="GET"&&t==="health")return{statusCode:200,headers:{"Content-Type":"text/plain","Access-Control-Allow-Origin":"*"},body:"OK"};if(o.httpMethod==="POST"&&Object.keys(r).includes(t)){let e={};if(o.body)try{e=JSON.parse(o.body)}catch{e={}}let n=r[t];if(!n)return{statusCode:404,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({error:"Handler not found"})};let i=new Map;o.headers?.Cookie&&o.headers.Cookie.split(";").forEach(y=>{let[a,l]=y.trim().split("=");a&&l&&i.set(a,l)});let d=await n(e,{cookies:i});return{statusCode:200,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS","Access-Control-Allow-Headers":"Content-Type"},body:JSON.stringify(d)}}return o.httpMethod==="OPTIONS"?{statusCode:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS","Access-Control-Allow-Headers":"Content-Type"},body:""}:{statusCode:404,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({error:"Not Found"})}}return console.log("Non-HTTP event received:",o),{statusCode:200,body:JSON.stringify({message:"Event processed"})}}catch(t){return console.error("Lambda Error:",t),{statusCode:500,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({error:"Internal Server Error"})}}};export{A as handler};
